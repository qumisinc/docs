---
title: "Git Branching Strategies"
description: "How to keep your feature branches in sync with the release branch"
icon: "git-branch"
noindex: true
---

<Accordion title="üìã Quick Reference - Update Your Branch">

### Choose your update strategy:

#### Option A: Rebase (Recommended - Clean History)
```bash
git checkout release
git pull origin release
git checkout your-feature-branch
git rebase release
git push --force-with-lease
```

#### Option B: Merge (Safer - No Force Push)
```bash
git checkout release
git pull origin release
git checkout your-feature-branch
git merge release
git push
```

<Warning>
If you see conflicts, you'll need to resolve them. See the [Troubleshooting](#troubleshooting) section.
</Warning>

</Accordion>

## The Core Problem

Your feature branch is out of sync with `release`. Another engineer merged their changes while you were working. Now your PR shows their commits mixed with yours, making code review confusing.

### What This Looks Like

```mermaid
gitGraph
    commit id: "A"
    commit id: "B"
    branch your-feature
    checkout your-feature
    commit id: "X (your work)"
    commit id: "Y (your work)"
    checkout main
    commit id: "C (colleague's work)"
    commit id: "D (colleague's work)"
    checkout your-feature
    commit id: "Z (your work)"
```

### After Rebase (Clean History)

```mermaid
gitGraph
    commit id: "A"
    commit id: "B"
    commit id: "C (colleague's)"
    commit id: "D (colleague's)"
    branch your-feature
    checkout your-feature
    commit id: "X' (your work)"
    commit id: "Y' (your work)"
    commit id: "Z' (your work)"
```

## Our Branching Model

```mermaid
flowchart TB
    main["main (production)"]
    release["release (staging)"]
    feat1["erik/eng-983-feature-one"]
    feat2["sarah/eng-984-feature-two"]
    feat3["alex/eng-985-feature-three"]

    main --> release
    release --> feat1
    release --> feat2
    release --> feat3

    feat1 -.->|PR & Merge| release
    feat2 -.->|PR & Merge| release
    feat3 -.->|PR & Merge| release

    style main fill:#e1f5e1
    style release fill:#fff3cd
    style feat1 fill:#d1ecf1
    style feat2 fill:#d1ecf1
    style feat3 fill:#d1ecf1
```

- **Branch naming**: `engineer-name/ticket-id-description`
- **Base branch**: Always branch from `release`
- **Target branch**: Always merge back to `release`

## The Two Solutions

### Decision Flowchart

```mermaid
flowchart TD
    Start([Need to update your branch?])
    Start --> Q1{Is it a long-running<br/>feature branch?}

    Q1 -->|Yes| Q2{Comfortable with<br/>force push?}
    Q1 -->|No| Rebase[Use Rebase<br/>‚úÖ Clean history]

    Q2 -->|Yes| Rebase
    Q2 -->|No| Merge[Use Merge<br/>‚ö†Ô∏è Simpler but messier]

    Rebase --> RebaseCmd[git rebase release<br/>git push --force-with-lease]
    Merge --> MergeCmd[git merge release<br/>git push]

    style Rebase fill:#d4edda
    style Merge fill:#fff3cd
    style RebaseCmd fill:#e7f3ff
    style MergeCmd fill:#e7f3ff
```

### Quick Comparison

| | Rebase (Recommended) | Merge (Alternative) |
|---|---|---|
| **Result** | Clean, linear history | Preserves exact timeline |
| **Safety** | Requires `--force-with-lease` | Normal push |
| **Best For** | Most feature work | Long-running branches |
| **Complexity** | Moderate | Simple |

<Info>
**Our Recommendation**: Use **rebase** for feature branches. It keeps our Git history clean and makes code reviews easier. Only use merge if you're uncomfortable with rebase or working on a long-running feature.
</Info>

## Step-by-Step: Rebase (Recommended)

‚úÖ **Use this for**: Regular feature branches, bug fixes, most daily work

<Steps>

### Update your local release branch

```bash
git checkout release
git pull origin release
```

### Switch to your feature branch

```bash
git checkout your-feature-branch  # e.g., erik/eng-984-add-auth
```

### Rebase onto the updated release

```bash
git rebase release
```

### Force push safely

```bash
git push --force-with-lease
```
<Warning>
Never use `--force` alone. Always use `--force-with-lease` for safety.
</Warning>

</Steps>

### If You Hit Conflicts

```bash
# 1. Fix the conflicted files (your editor will show <<<< markers)
# 2. Stage the fixed files
git add .
# 3. Continue rebasing
git rebase --continue
# 4. Repeat if more conflicts appear
```

<Tip>
**Escape hatch**: If things go wrong, run `git rebase --abort` to undo everything.
</Tip>

## Step-by-Step: Merge (Alternative)

‚ö†Ô∏è **Use this for**: Long-running features, when rebase is too complex, or if you're not comfortable with force pushing

<Steps>

### Update your local release branch

```bash
git checkout release
git pull origin release
```

### Switch to your feature branch

```bash
git checkout your-feature-branch
```

### Merge release into your branch

```bash
git merge release
```

### Push normally

```bash
git push origin your-feature-branch
```

</Steps>

## Troubleshooting

### Common Problems & Solutions

<AccordionGroup>

<Accordion title="üî¥ I see merge conflicts">
```bash
# For rebase conflicts:
# 1. Fix conflicts in your editor (look for <<<< markers)
git add .
git rebase --continue

# Too many conflicts? Abort and try merge instead:
git rebase --abort
git merge release  # Try merge strategy instead
```
</Accordion>

<Accordion title="üî¥ I accidentally pushed to the wrong branch">
```bash
# Undo the last commit (keep changes)
git reset --soft HEAD~1
# Switch to correct branch
git checkout -b correct-branch-name
# Commit and push to right place
git commit -m "your message"
git push origin correct-branch-name
```
</Accordion>

<Accordion title="üî¥ My PR still shows other people's commits">
You forgot to update your branch. Follow the [Quick Fix](#emergency-need-to-fix-your-branch-right-now) at the top of this guide.
</Accordion>

<Accordion title="üî¥ Git says 'cannot push' after rebase">
You need to force push after rebasing:
```bash
git push --force-with-lease
```
</Accordion>

<Accordion title="üî¥ I want to start over completely">
```bash
# Save your work first!
git stash
# Reset to match remote release
git fetch origin
git reset --hard origin/release
# Apply your changes back
git stash pop
```
</Accordion>

</AccordionGroup>

## Best Practices

### Development Workflow

```mermaid
flowchart LR
    Start([Start Work]) --> Branch[Create feature branch<br/>from release]
    Branch --> Work[Make commits]
    Work --> Update{Time to PR?}

    Update -->|Yes| Sync[Update your branch<br/>rebase or merge]
    Sync --> PR[Create Pull Request]
    PR --> Review[Code Review]

    Review -->|Changes Requested| Fix[Make fixes]
    Fix --> Sync2[Update branch again<br/>if needed]
    Sync2 --> Review

    Review -->|Approved| Merge[Merge to release]
    Merge --> End([Done])

    style Start fill:#e7f3ff
    style End fill:#d4edda
    style Sync fill:#fff3cd
    style Sync2 fill:#fff3cd
```

### ‚úÖ DO

- Update your branch **before** creating a PR
- Use `--force-with-lease` (never just `--force`)
- Pull from `release` at least once daily
- Ask for help if confused (#engineering channel)
- Test your code after updating

### üõë DON'T

- Create PRs without updating first
- Force push to `main` or `release`
- Rebase commits others are using
- Mix rebase and merge randomly
- Panic - everything in Git can be undone

## Command Reference

### Essential Commands

```bash
# Update your branch (Rebase)
git checkout release && git pull
git checkout your-branch
git rebase release
git push --force-with-lease

# Update your branch (Merge)
git checkout release && git pull
git checkout your-branch
git merge release
git push

# Emergency exits
git rebase --abort      # Cancel a rebase
git merge --abort       # Cancel a merge
git reset --hard HEAD~1 # Undo last commit (destructive!)
```

### Getting Help

- **Slack**: `#engineering` channel
- **Pair Programming**: Ask a teammate to screen-share
- **Documentation**: This guide and [Git official docs](https://git-scm.com/docs)